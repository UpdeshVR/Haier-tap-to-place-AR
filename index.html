<!DOCTYPE html>
<html lang="en">

<head>

  <link rel="stylesheet" href="style.css">
  <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
  <script src="//cdn.8thwall.com/web/aframe/aframe-extras-7.2.0.min.js"></script>
  <!-- <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-physics-system@v4.2.2/dist/aframe-physics-system.min.js"></script>   -->
  <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>

  <!-- <script src="https://jeromeetienne.github.io/AR.js/aframe/build/aframe-ar.js"></script> -->

  <!-- Include your JS files -->
  <script type="module">
    import {tapPlaceCursorComponent} from './tap-place-cursor.js'
    // Register custom A-Frame components
    AFRAME.registerComponent('tap-place-cursor', tapPlaceCursorComponent())
  </script>
</head>

<body style='margin : 0px; overflow: hidden;'>

  <!-- <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;" next-button  reflacrtion-component no-cull > -->
  <a-scene vr-mode-ui="enabled: false" arjs="sourceType: webcam; videoTexture: true; debugUIEnabled: false;"
    reflection="directionalLight:a-light#dirlight;" instructions next-button reflacrtion-component>
    <!-- <a-scene
    xrextras-gesture-detector
    landing-page
    xrextras-loading
    xrextras-runtime-error
    renderer="colorManagement: true"
    xrweb> -->
  
    <a-assets>
      <a-asset-item id="car" src="./assets/models/fridge_bake_6.glb"></a-asset-item>
      <a-asset-item id="car-transparent" src="assets/models/wire_ghost.glb"></a-asset-item>
      <img id="icon" src="./assets/images/rectangle-icon.png">
    </a-assets>
  
    <!-- The raycaster will emit mouse events on scene objects specified with the cantap class -->
    <a-camera
      id="camera"
      position="0 8 0"
      pointer-lock-enabled="false"
      cursor="fuse: false; rayOrigin: mouse;">
    </a-camera>
    
    <a-entity 
      id="cursor"
      tap-place-cursor
      gltf-model="#car-transparent"
      scale="2 2 2"
      reflections="type: static">
        <a-plane
          rotation="-90 0 0"
          scale="1.6 3.3 1"
          material="src: #icon; opacity: 0.5; roughness: 0.8; metalness: 0;">
        </a-plane>
    </a-entity>
    
    <a-entity
      light="
        type: directional;
        intensity: 0.8;
        castShadow: true;
        shadowMapHeight:2048;
        shadowMapWidth:2048;
        shadowCameraTop: 20;
        shadowCameraBottom: -20;
        shadowCameraRight: 20;
        shadowCameraLeft: -20;
        target: #model"
      xrextras-attach="target: model; offset: 8 15 4"
      position="1 4.3 2.5"
      shadow>
    </a-entity>
  
    <a-light type="ambient" intensity="0.5"></a-light>
  
    <a-entity
      id="model"
      gltf-model="#car"
      scale="2 2 2"
      visible="false"
      shadow="receive: false"
      xrextras-hold-drag
      xrextras-two-finger-rotate
      xrextras-pinch-scale
      reflections="type: realtime">
    </a-entity>
  
    <!-- Adding the cantap class allows the ground to be clicked -->
    <a-box
      id="ground"
      scale="1000 2 1000"
      position="0 -1 0"
      material="shader: shadow; transparent: true; opacity: 0.4"
      shadow>
    </a-box>

  </a-scene>

</body>

</html>